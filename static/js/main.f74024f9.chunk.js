(this["webpackJsonpadv-weather-app"]=this["webpackJsonpadv-weather-app"]||[]).push([[0],{336:function(e,t,a){e.exports=a(639)},341:function(e,t,a){},639:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c);a(341),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(285),s=a(683),i=a(675),u=a(676),m=a(677),d=a(181),p=a(24),f=a(56),b=a(144),h=a(667),g=a(287),v=a(679),E=a(669),j=a(665),O=a(143),w=a(26),k=Object(j.a)((function(e){return Object(s.a)({geoMapBox:{overflow:"hidden"},geologicalMap:{},coord:{"&+&":{marginLeft:e.spacing(2)}}})})),x={width:"100%",height:"400px"},y=Object(n.memo)((function(e){var t=e.onChange,a=(Object(g.a)(e,["onChange"]),k()),c=r.a.useState(null),o=Object(f.a)(c,2),l=(o[0],o[1]),s=r.a.useState((function(){return{lat:0,lng:0}})),i=Object(f.a)(s,2),u=i[0],m=i[1],d=Object(w.d)((function(e){return e.dashboard.forecastRequestParams.coords}),w.b);Object(n.useEffect)((function(){m(d)}),[d]);var p=r.a.useCallback((function(e){l(e),e.setCenter(d)}),[d]),b=r.a.useCallback((function(e){l(null)}),[]),j=Object(n.useCallback)((function(e){var a=e.latLng,n=Math.round(1e7*a.lat())/1e7,r=Math.round(1e7*a.lng())/1e7;m({lat:n,lng:r}),t&&t({coords:{lat:Math.min(Math.max(-90,n),90),lng:Math.min(Math.max(-180,r),180)}})}),[t]);return r.a.createElement(h.a,{item:!0,container:!0,direction:"column",spacing:3},r.a.createElement(h.a,{item:!0,xs:!0},r.a.createElement(v.a,{className:a.geoMapBox,borderRadius:8},d.lat&&r.a.createElement(O.b,{googleMapsApiKey:"AIzaSyD2sNbuD_DR0jCUr7nEk1KsXFlLWeLmlJ4"},r.a.createElement(O.a,{mapContainerStyle:x,options:{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1},zoom:10,onLoad:p,onUnmount:b,onClick:j},r.a.createElement(O.c,{position:u}))))),r.a.createElement(h.a,{item:!0},r.a.createElement(E.a,{component:"span",className:a.coord},d.lat.toFixed(7)),r.a.createElement(E.a,{component:"span",className:a.coord},d.lng.toFixed(7))))})),R=a(674),P=a(686),C=a(680),M=a(687),D=a(284),q=a(31),W=a(678),F=a(97),S=Object(j.a)((function(e){return Object(s.a)({formControl:{minWidth:200},dateFormControl:{minWidth:200,maxWidth:200}})})),L=Object(n.memo)((function(e){var t=e.onChange,a=S(),n=Object(w.d)((function(e){return[e.dashboard.forecastRequestParams.selectedDate,e.dashboard.forecastRequestParams.selectedWeatherParam]}),w.b),c=Object(f.a)(n,2),o=c[0],l=c[1];return r.a.createElement(h.a,{item:!0,container:!0,direction:"row",spacing:2},r.a.createElement(q.a,{utils:D.a},r.a.createElement(h.a,{item:!0},r.a.createElement(W.a,{margin:"normal",className:a.dateFormControl,id:"date-picker-dialog",label:"Date",format:"MM/dd/yyyy",minDate:new Date,maxDate:Object(F.a)(new Date,3),value:o,onChange:function(e){null!==e&&t&&t({selectedDate:e})},KeyboardButtonProps:{"aria-label":"pick date"}}))),r.a.createElement(h.a,{item:!0},r.a.createElement(R.a,{className:a.formControl,margin:"normal"},r.a.createElement(P.a,{id:"weather-params-select-label"},"Parameter"),r.a.createElement(C.a,{labelId:"weather-params-select-label",id:"weather-params-select",value:l,onChange:function(e){var a=e.target.value;t&&t({selectedWeatherParam:a})}},r.a.createElement(M.a,{value:"temp"},"Temp"),r.a.createElement(M.a,{value:"wind_speed"},"Wind speed"),r.a.createElement(M.a,{value:"precipitation"},"Precipitation")))))})),N=a(58),T=a(138),_=a(87),B={forecastRequestParams:{coords:{lat:35,lng:-86.5},selectedDate:new Date,selectedWeatherParam:"temp"},forecastResults:null,forecastResultParams:null},G=Object(_.b)({name:"dashboard",initialState:B,reducers:{setForecastRequestParams:function(e,t){var a=t.payload,n=a.coords,r=a.selectedDate,c=a.selectedWeatherParam;n&&(e.forecastRequestParams.coords=n),r&&(e.forecastRequestParams.selectedDate=r),c&&(e.forecastRequestParams.selectedWeatherParam=c)},setCoords:function(e,t){var a=t.payload,n=a.lat,r=a.lng;e.forecastRequestParams.coords.lat=n,e.forecastRequestParams.coords.lng=r},setForecastResult:function(e,t){var a=t.payload,n=a.forecastResults,r=a.forecastResultParams;e.forecastResults=n,e.forecastResultParams=r}}}),K=G.reducer,J=G.actions,U=J.setForecastRequestParams,I=J.setForecastResult,z=(J.setCoords,new Map([["temp",{param:"temp",value:"Temperature"}],["wind_speed",{param:"wind_speed",value:"Wind speed"}],["precipitation",{param:"precipitation",value:"Precipitation"}]])),A=Object(j.a)((function(e){return Object(s.a)({tooltip:{padding:"0.5rem 1rem"},label:{display:"inline-block",position:"relative",paddingLeft:e.spacing(2),"&::before":{content:"''",position:"absolute",left:0,borderRadius:"50%",height:"8px",width:"8px",top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,114,245,1)"}}})})),H=Object(n.memo)((function(){var e=Object(w.d)((function(e){return[e.dashboard.forecastResults,e.dashboard.forecastResultParams]}),w.b),t=Object(f.a)(e,2),a=t[0],n=t[1],c=null;null!=n&&(c=z.get(n.selectedWeatherParam));var o="";if(a&&c){var l,s=a[0];if(s)o=null===(l=s[c.param])||void 0===l?void 0:l.units}return r.a.createElement(h.a,{container:!0,item:!0},r.a.createElement(N.e,{height:300},r.a.createElement(N.d,{data:a||[]},r.a.createElement(N.f,{wrapperStyle:{backgroundColor:"rgba(48,47,79,1)",borderRadius:"4px"},contentStyle:{backgroundColor:"transparent"},content:r.a.createElement(Y,{weatherParam:c})}),r.a.createElement(N.c,{type:"natural",dataKey:"".concat(c&&c.param,".value"),stroke:"#0072F5",width:2,dot:!1,activeDot:{r:4,strokeWidth:8,stroke:"rgba(0,114,245,.5)"}}),r.a.createElement(N.a,{stroke:"rgba(255,255,255,0.14)",vertical:!1}),r.a.createElement(N.g,{dataKey:"observation_time.value",domain:["dataMin","dataMax"],axisLine:!1,tick:!0,tickFormatter:function(e){return Object(T.a)(new Date(e),"h:mm a")}}),r.a.createElement(N.h,{width:50,axisLine:!1,tickCount:4,stroke:"rgba(255,255,255,0.5)",domain:["auto","auto"],tickLine:!1},r.a.createElement(N.b,{value:o,offset:0,position:"left",angle:-90,stroke:"rgba(255,255,255,1)"})))))})),Y=function(e){var t=e.active,a=e.payload,n=e.label,c=e.weatherParam,o=A(),l=null;a&&a[0]&&c&&(l=a[0].payload[c.param]);var s=null;if(n)try{s=new Date(n)}catch(i){console.error(i)}return t?r.a.createElement("div",{className:o.tooltip},r.a.createElement("p",null,r.a.createElement("b",null,s&&Object(T.a)(s,"iii, MMM d, h:mm a"))),r.a.createElement("ul",{style:{listStyle:"none",padding:0}},r.a.createElement("li",{className:o.label},"".concat(c&&c.value," ").concat(l?"".concat(l.value," ").concat(l.units):"")))):null},Z=Object(n.memo)((function(e){var t=e.forecastRequestParamsRef,a=Object(w.c)(),r=Object(p.e)(),c=Object(p.f)(),o=Object(w.d)((function(e){return e.dashboard.forecastRequestParams.coords}),w.b),l=Object(n.useRef)({lat:null,lng:null}),s=Object(n.useState)("pending"),i=Object(f.a)(s,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){try{if(c.search){var e=new URLSearchParams(c.search),n=parseFloat(e.get("lat")),r=parseFloat(e.get("lng"));if(!isNaN(n)&&!isNaN(r)){var s=Math.round(1e7*n)/1e7,i=Math.round(1e7*r)/1e7,u=Math.min(Math.max(-90,s),90),d=Math.min(Math.max(-180,i),180),p=l.current;u===p.lat&&d===p.lng||(l.current={lat:o.lat,lng:o.lng},a(U(Object(b.a)({},t.current,{coords:{lat:u,lng:d}}))))}}}catch(f){console.error(f.message)}finally{m("resolved")}}),[a,c.search]),Object(n.useEffect)((function(){if("resolved"===u){var e=l.current;try{if(e.lat!==o.lat||e.lng===o.lng){null!==e.lat&&null!==e.lng||a(U(Object(b.a)({},t.current,{coords:{lat:o.lat,lng:o.lng}}))),l.current={lat:o.lat,lng:o.lng};var n=new URLSearchParams(c.search);n.set("lat",o.lat.toFixed(7)),n.set("lng",o.lng.toFixed(7));var s="".concat(c.pathname,"?").concat(n.toString());r.replace(s)}}catch(i){console.log(i)}}}),[u,o.lat,o.lng,r,c.pathname,c.search]),null})),V=function(){var e=Object(w.c)(),t=Object(w.d)((function(e){return e.dashboard.forecastRequestParams})),a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t}),[t]),Object(n.useEffect)((function(){}),[e]);var c=Object(n.useCallback)((function(t){e(U(Object(b.a)({},a.current,{},t)))}),[e]);return r.a.createElement(h.a,{direction:"column",container:!0,spacing:3},r.a.createElement(h.a,{item:!0},r.a.createElement(y,{onChange:c}),r.a.createElement(Z,{forecastRequestParamsRef:a})),r.a.createElement(h.a,{item:!0},r.a.createElement(L,{onChange:c})),r.a.createElement(h.a,{item:!0},r.a.createElement(H,null)))},X=function(){return n.createElement(d.a,null,n.createElement(p.a,{path:"/weather"},n.createElement(V,null)))},$={palette:{type:"dark",background:{default:"#131224"}},overrides:{MuiCssBaseline:{"@global":{ul:{margin:0},p:{margin:0,padding:0}}}}},Q=Object(l.a)($),ee=Object(j.a)((function(e){return Object(s.a)({root:{padding:20,width:"auto"}})}));var te=function(){var e=ee();return r.a.createElement(i.a,{theme:Q},r.a.createElement(u.a,null),r.a.createElement(m.a,{className:e.root},r.a.createElement(X,null)))},ae=a(33),ne=Object(_.b)({name:"geolocation",initialState:{lat:-1e3,lng:-1e3},reducers:{getClientGeolocation:function(e){return e},setClientGeolocation:function(e,t){var a=t.payload;e.lat=a.coords.latitude,e.lng=a.coords.longitude}}}),re=ne.actions,ce=re.getClientGeolocation,oe=re.setClientGeolocation,le=ne.reducer,se=Object(ae.c)({geolocation:le,dashboard:K}),ie=a(286),ue=a(25),me=a.n(ue),de=a(38),pe=a(283),fe=function(){var e=Object(pe.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=4;break}return e.abrupt("return",new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){console.log(t),e(t)}),(function(e){t(e)}))})));case 4:throw new Error("Cannot get geolocation");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,Object(de.b)(fe);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:if(null===t){e.next=14;break}return e.next=13,Object(de.c)(oe({coords:t.coords}));case 13:console.log(t.coords);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})),he=me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(ce,be);case 2:case"end":return e.stop()}}),e)})),ge=a(622).default.create({baseURL:"http:https://api.climacell.co/v3/weather/forecast/hourly",timeout:6e4,headers:{"content-type":"application/json",apikey:"4qKP3snmLOeTlJf4YD1pc02JphcwuZmR"}}),ve={GET:function(e){return ge.get(e)}},Ee=me.a.mark((function e(t){var a,n,r,c,o,l,s,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.coords,r=n.lat,c=n.lng,o=a.selectedDate,l=a.selectedWeatherParam,s=null,i="/hourly?lat=".concat(r,"&lon=").concat(c,"&unit_system=si&start_time=").concat(o?Object(T.a)(o,"yyyy-MM-dd'T'HH:mm:ss'Z'"):"now","&fields=").concat(l),e.prev=3,e.next=6,Object(de.b)(ve.GET,i);case 6:s=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:if(null===s.data){e.next=15;break}return e.next=15,Object(de.c)(I({forecastResults:s.data,forecastResultParams:t.payload}));case 15:case"end":return e.stop()}}),e,null,[[3,9]])})),je=me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(U,Ee);case 2:case"end":return e.stop()}}),e)})),Oe=me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[he,je],e.next=3,Object(de.a)(t.map((function(e){return Object(de.d)(me.a.mark((function t(){return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(de.b)(e);case 4:return t.abrupt("break",12);case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))})));case 3:case"end":return e.stop()}}),e)})),we=Object(ie.a)(),ke=Object(_.a)({reducer:se,middleware:[we]});we.run(Oe);var xe=ke;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w.a,{store:xe},r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[336,1,2]]]);
//# sourceMappingURL=main.f74024f9.chunk.js.map