(this["webpackJsonpadv-weather-app"]=this["webpackJsonpadv-weather-app"]||[]).push([[0],{336:function(e,a,t){e.exports=t(639)},341:function(e,a,t){},639:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(18),o=t.n(c);t(341),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=t(285),s=t(683),i=t(675),u=t(676),m=t(677),d=t(181),p=t(24),f=t(56),b=t(144),h=t(667),g=t(287),v=t(679),E=t(669),j=t(665),O=t(143),w=t(26),k=Object(j.a)((function(e){return Object(s.a)({geoMapBox:{overflow:"hidden"},geologicalMap:{},coord:{"&+&":{marginLeft:e.spacing(2)}}})})),x={width:"100%",height:"400px"},y=Object(n.memo)((function(e){var a=e.onChange,t=(Object(g.a)(e,["onChange"]),k()),c=r.a.useState(null),o=Object(f.a)(c,2),l=(o[0],o[1]),s=r.a.useState((function(){return{lat:0,lng:0}})),i=Object(f.a)(s,2),u=i[0],m=i[1],d=Object(w.d)((function(e){return e.dashboard.forecastRequestParams.coords}),w.b);Object(n.useEffect)((function(){m(d)}),[d]);var p=r.a.useCallback((function(e){l(e),e.setCenter(d)}),[d]),b=r.a.useCallback((function(e){l(null)}),[]),j=Object(n.useCallback)((function(e){var t=e.latLng,n=Math.round(1e7*t.lat())/1e7,r=Math.round(1e7*t.lng())/1e7;m({lat:n,lng:r}),a&&a({coords:{lat:Math.min(Math.max(-90,n),90),lng:Math.min(Math.max(-180,r),180)}})}),[a]);return r.a.createElement(h.a,{item:!0,container:!0,direction:"column",spacing:3},r.a.createElement(h.a,{item:!0,xs:!0},r.a.createElement(v.a,{className:t.geoMapBox,borderRadius:8},d.lat&&r.a.createElement(O.b,{googleMapsApiKey:"AIzaSyD2sNbuD_DR0jCUr7nEk1KsXFlLWeLmlJ4"},r.a.createElement(O.a,{mapContainerStyle:x,options:{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1},zoom:10,onLoad:p,onUnmount:b,onClick:j},r.a.createElement(O.c,{position:u}))))),r.a.createElement(h.a,{item:!0},r.a.createElement(E.a,{component:"span",className:t.coord},d.lat.toFixed(7)),r.a.createElement(E.a,{component:"span",className:t.coord},d.lng.toFixed(7))))})),R=t(674),P=t(686),C=t(680),M=t(687),D=t(284),q=t(31),W=t(678),F=t(97),S=Object(j.a)((function(e){return Object(s.a)({formControl:{minWidth:200},dateFormControl:{minWidth:200,maxWidth:200}})})),L=Object(n.memo)((function(e){var a=e.onChange,t=S(),n=Object(w.d)((function(e){return[e.dashboard.forecastRequestParams.selectedDate,e.dashboard.forecastRequestParams.selectedWeatherParam]}),w.b),c=Object(f.a)(n,2),o=c[0],l=c[1];return r.a.createElement(h.a,{item:!0,container:!0,direction:"row",spacing:2},r.a.createElement(q.a,{utils:D.a},r.a.createElement(h.a,{item:!0},r.a.createElement(W.a,{margin:"normal",className:t.dateFormControl,id:"date-picker-dialog",label:"Date",format:"MM/dd/yyyy",minDate:new Date,maxDate:Object(F.a)(new Date,3),value:o,onChange:function(e){null!==e&&a&&a({selectedDate:e})},KeyboardButtonProps:{"aria-label":"pick date"}}))),r.a.createElement(h.a,{item:!0},r.a.createElement(R.a,{className:t.formControl,margin:"normal"},r.a.createElement(P.a,{id:"weather-params-select-label"},"Parameter"),r.a.createElement(C.a,{labelId:"weather-params-select-label",id:"weather-params-select",value:l,onChange:function(e){var t=e.target.value;a&&a({selectedWeatherParam:t})}},r.a.createElement(M.a,{value:"temp"},"Temp"),r.a.createElement(M.a,{value:"wind_speed"},"Wind speed"),r.a.createElement(M.a,{value:"precipitation"},"Precipitation")))))})),N=t(58),T=t(138),_=t(87),B={forecastRequestParams:{coords:{lat:35,lng:-86.5},selectedDate:new Date,selectedWeatherParam:"temp"},forecastResults:null,forecastResultParams:null},G=Object(_.b)({name:"dashboard",initialState:B,reducers:{setForecastRequestParams:function(e,a){var t=a.payload,n=t.coords,r=t.selectedDate,c=t.selectedWeatherParam;n&&(e.forecastRequestParams.coords=n),r&&(e.forecastRequestParams.selectedDate=r),c&&(e.forecastRequestParams.selectedWeatherParam=c)},setCoords:function(e,a){var t=a.payload,n=t.lat,r=t.lng;e.forecastRequestParams.coords.lat=n,e.forecastRequestParams.coords.lng=r},setForecastResult:function(e,a){var t=a.payload,n=t.forecastResults,r=t.forecastResultParams;e.forecastResults=n,e.forecastResultParams=r}}}),K=G.reducer,J=G.actions,U=J.setForecastRequestParams,I=J.setForecastResult,z=(J.setCoords,new Map([["temp",{param:"temp",value:"Temperature"}],["wind_speed",{param:"wind_speed",value:"Wind speed"}],["precipitation",{param:"precipitation",value:"Precipitation"}]])),A=Object(j.a)((function(e){return Object(s.a)({tooltip:{padding:"0.5rem 1rem"},label:{display:"inline-block",position:"relative",paddingLeft:e.spacing(2),"&::before":{content:"''",position:"absolute",left:0,borderRadius:"50%",height:"8px",width:"8px",top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,114,245,1)"}}})})),H=Object(n.memo)((function(){var e=Object(w.d)((function(e){return[e.dashboard.forecastResults,e.dashboard.forecastResultParams]}),w.b),a=Object(f.a)(e,2),t=a[0],n=a[1],c=null;null!=n&&(c=z.get(n.selectedWeatherParam));var o="";if(t&&c){var l,s=t[0];if(s)o=null===(l=s[c.param])||void 0===l?void 0:l.units}return r.a.createElement(h.a,{container:!0,item:!0},r.a.createElement(N.e,{height:300},r.a.createElement(N.d,{data:t||[]},r.a.createElement(N.f,{wrapperStyle:{backgroundColor:"rgba(48,47,79,1)",borderRadius:"4px"},contentStyle:{backgroundColor:"transparent"},content:r.a.createElement(Y,{weatherParam:c})}),r.a.createElement(N.c,{type:"natural",dataKey:"".concat(c&&c.param,".value"),stroke:"#0072F5",width:2,dot:!1,activeDot:{r:4,strokeWidth:8,stroke:"rgba(0,114,245,.5)"}}),r.a.createElement(N.a,{stroke:"rgba(255,255,255,0.14)",vertical:!1}),r.a.createElement(N.g,{dataKey:"observation_time.value",domain:["dataMin","dataMax"],axisLine:!1,tick:!0,tickFormatter:function(e){return Object(T.a)(new Date(e),"h:mm a")}}),r.a.createElement(N.h,{width:50,axisLine:!1,tickCount:4,stroke:"rgba(255,255,255,0.5)",domain:["auto","auto"],tickLine:!1},r.a.createElement(N.b,{value:o,offset:0,position:"left",angle:-90,stroke:"rgba(255,255,255,1)"})))))})),Y=function(e){var a=e.active,t=e.payload,n=e.label,c=e.weatherParam,o=A(),l=null;t&&t[0]&&c&&(l=t[0].payload[c.param]);var s=null;if(n)try{s=new Date(n)}catch(i){console.error(i)}return a?r.a.createElement("div",{className:o.tooltip},r.a.createElement("p",null,r.a.createElement("b",null,s&&Object(T.a)(s,"iii, MMM d, h:mm a"))),r.a.createElement("ul",{style:{listStyle:"none",padding:0}},r.a.createElement("li",{className:o.label},"".concat(c&&c.value," ").concat(l?"".concat(l.value," ").concat(l.units):"")))):null},Z=Object(n.memo)((function(e){var a=e.forecastRequestParamsRef,t=Object(w.c)(),r=Object(p.e)(),c=Object(p.f)(),o=Object(w.d)((function(e){return e.dashboard.forecastRequestParams.coords}),w.b),l=Object(n.useRef)({lat:null,lng:null}),s=Object(n.useState)("pending"),i=Object(f.a)(s,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){try{if(c.search){var e=new URLSearchParams(c.search),n=parseFloat(e.get("lat")),r=parseFloat(e.get("lng"));if(!isNaN(n)&&!isNaN(r)){var s=Math.round(1e7*n)/1e7,i=Math.round(1e7*r)/1e7,u=Math.min(Math.max(-90,s),90),d=Math.min(Math.max(-180,i),180),p=l.current;u===p.lat&&d===p.lng||(l.current={lat:o.lat,lng:o.lng},t(U(Object(b.a)({},a.current,{coords:{lat:u,lng:d}}))))}}}catch(f){console.error(f.message)}finally{m("resolved")}}),[t,c.search]),Object(n.useEffect)((function(){if("resolved"===u){var e=l.current;try{if(e.lat!==o.lat||e.lng===o.lng){null!==e.lat&&null!==e.lng||t(U(Object(b.a)({},a.current,{coords:{lat:o.lat,lng:o.lng}}))),l.current={lat:o.lat,lng:o.lng};var n=new URLSearchParams(c.search);n.set("lat",o.lat.toFixed(7)),n.set("lng",o.lng.toFixed(7));var s="".concat(c.pathname,"?").concat(n.toString());r.replace(s)}}catch(i){console.log(i)}}}),[u,o.lat,o.lng,r,c.pathname,c.search]),null})),V=function(){var e=Object(w.c)(),a=Object(w.d)((function(e){return e.dashboard.forecastRequestParams})),t=Object(n.useRef)(a);Object(n.useEffect)((function(){t.current=a}),[a]),Object(n.useEffect)((function(){}),[e]);var c=Object(n.useCallback)((function(a){e(U(Object(b.a)({},t.current,{},a)))}),[e]);return r.a.createElement(h.a,{direction:"column",container:!0,spacing:3},r.a.createElement(h.a,{item:!0},r.a.createElement(y,{onChange:c}),r.a.createElement(Z,{forecastRequestParamsRef:t})),r.a.createElement(h.a,{item:!0},r.a.createElement(L,{onChange:c})),r.a.createElement(h.a,{item:!0},r.a.createElement(H,null)))},X=function(){return n.createElement(d.a,null,n.createElement(p.a,{path:"/"},n.createElement(V,null)))},$={palette:{type:"dark",background:{default:"#131224"}},overrides:{MuiCssBaseline:{"@global":{ul:{margin:0},p:{margin:0,padding:0}}}}},Q=Object(l.a)($),ee=Object(j.a)((function(e){return Object(s.a)({root:{padding:20,width:"auto"}})}));var ae=function(){var e=ee();return r.a.createElement(i.a,{theme:Q},r.a.createElement(u.a,null),r.a.createElement(m.a,{className:e.root},r.a.createElement(X,null)))},te=t(33),ne=Object(_.b)({name:"geolocation",initialState:{lat:-1e3,lng:-1e3},reducers:{getClientGeolocation:function(e){return e},setClientGeolocation:function(e,a){var t=a.payload;e.lat=t.coords.latitude,e.lng=t.coords.longitude}}}),re=ne.actions,ce=re.getClientGeolocation,oe=re.setClientGeolocation,le=ne.reducer,se=Object(te.c)({geolocation:le,dashboard:K}),ie=t(286),ue=t(25),me=t.n(ue),de=t(38),pe=t(283),fe=function(){var e=Object(pe.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=4;break}return e.abrupt("return",new Promise((function(e,a){navigator.geolocation.getCurrentPosition((function(a){console.log(a),e(a)}),(function(e){a(e)}))})));case 4:throw new Error("Cannot get geolocation");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=me.a.mark((function e(){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,Object(de.b)(fe);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:if(null===a){e.next=14;break}return e.next=13,Object(de.c)(oe({coords:a.coords}));case 13:console.log(a.coords);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})),he=me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(ce,be);case 2:case"end":return e.stop()}}),e)})),ge=t(622).default.create({baseURL:"https://api.climacell.co/v3/weather/forecast",timeout:6e4,headers:{"content-type":"application/json",apikey:"4qKP3snmLOeTlJf4YD1pc02JphcwuZmR"}}),ve={GET:function(e){return ge.get(e)}},Ee=me.a.mark((function e(a){var t,n,r,c,o,l,s,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.payload,n=t.coords,r=n.lat,c=n.lng,o=t.selectedDate,l=t.selectedWeatherParam,s=null,i="/hourly?lat=".concat(r,"&lon=").concat(c,"&unit_system=si&start_time=").concat(o?Object(T.a)(o,"yyyy-MM-dd'T'HH:mm:ss'Z'"):"now","&fields=").concat(l),e.prev=3,e.next=6,Object(de.b)(ve.GET,i);case 6:s=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:if(!s||null===s.data){e.next=15;break}return e.next=15,Object(de.c)(I({forecastResults:s.data,forecastResultParams:a.payload}));case 15:case"end":return e.stop()}}),e,null,[[3,9]])})),je=me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(U,Ee);case 2:case"end":return e.stop()}}),e)})),Oe=me.a.mark((function e(){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[he,je],e.next=3,Object(de.a)(a.map((function(e){return Object(de.d)(me.a.mark((function a(){return me.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,Object(de.b)(e);case 4:return a.abrupt("break",12);case 7:a.prev=7,a.t0=a.catch(1),console.error(a.t0);case 10:a.next=0;break;case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))})));case 3:case"end":return e.stop()}}),e)})),we=Object(ie.a)(),ke=Object(_.a)({reducer:se,middleware:[we]});we.run(Oe);var xe=ke;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w.a,{store:xe},r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[336,1,2]]]);
//# sourceMappingURL=main.3b271d51.chunk.js.map